{"mappings":"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","sources":["src/javascript/app.js"],"sourcesContent":["function showMessage(message, isError = false) {\n    const modalBody = document.getElementById('messageModalBody');\n    modalBody.textContent = message;\n\n    if (isError) {\n        modalBody.style.color = 'red';\n    } else {\n        modalBody.style.color = 'black';\n    }\n\n    const messageModal = new bootstrap.Modal(document.getElementById('messageModal'));\n    messageModal.show();\n}\n\nfunction confirmDelete(id) {\n    const confirmModal = new bootstrap.Modal(document.getElementById('confirmModal'));\n    confirmModal.show();\n\n    const confirmDeleteButton = document.getElementById('confirmDeleteButton');\n    confirmDeleteButton.onclick = () => {\n        deletePartido(id); \n        confirmModal.hide(); \n    };\n}\n\nfunction getPartidos() {\n    fetch('/api/partidos')\n        .then(response => response.json())\n        .then(data => {\n            console.log('Partidos:', data);\n            const listaPartidos = document.getElementById('listaPartidos');\n            listaPartidos.innerHTML = '';\n\n            data.forEach(partido => {\n                const row = document.createElement('tr');\n                let resultado = '';\n                switch (partido.resultado) {\n                    case 1:\n                        resultado = \"Ganado\";\n                        break;\n                    case -1:\n                        resultado = \"Perdido\";\n                        break;\n                    case 0:\n                        resultado = \"Esperando finalización\";\n                        break;\n                }\n\n                const deporteEmoji = {\n                    futbol: \"⚽\",\n                    tenis: \"🎾\",\n                    baloncesto: \"🏀\",\n                    voleibol: \"🏐\",\n                    rugby: \"🏉\",\n                    hockey: \"🏒\",\n                    default: \"🏅\"\n                };\n\n                const emoji = deporteEmoji[partido.deporte.toLowerCase()] || deporteEmoji.default;\n\n                let botonesAccion = `\n                    <button class=\"btn btn-warning\" onclick=\"abrirModalEditar(${partido.id})\">Editar</button>\n                    <button class=\"btn btn-danger\" onclick=\"confirmDelete(${partido.id})\">Eliminar</button>\n                    <button class=\"btn btn-info\" onclick=\"downloadFile(${partido.id})\">Descargar</button>\n                `;\n\n                if (partido.resultado === 0) {\n                    botonesAccion += `\n                        <button class=\"btn btn-success\" onclick=\"ganarPartido(${partido.id})\">Ganar</button>\n                        <button class=\"btn btn-danger\" onclick=\"perderPartido(${partido.id})\">Perder</button>\n                    `;\n                }\n\n                row.innerHTML = `\n                    <td>${partido.nombre}</td>\n                    <td>${partido.descripcion}</td>\n                    <td>${emoji} ${partido.deporte}</td>\n                    <td>${resultado}</td>\n                    <td>${partido.apuesta} €</td>\n                    <td>${botonesAccion}</td>\n                `;\n                listaPartidos.appendChild(row);\n            });\n        })\n        .catch(error => showMessage('Error al obtener los partidos: ' + error.message, true));\n}\n\nfunction abrirModalEditar(id) {\n    fetch(`/api/partidos/${id}`)\n        .then(response => response.json())\n        .then(data => {\n            document.getElementById('editarNombre').value = data.nombre;\n            document.getElementById('editarDescripcion').value = data.descripcion;\n            document.getElementById('editarDeporte').value = data.deporte; \n            document.getElementById('editarResultado').value = data.resultado;\n            document.getElementById('editarApuesta').value = data.apuesta;\n\n            const editarPartidoForm = document.getElementById('editarPartidoForm');\n            editarPartidoForm.onsubmit = (event) => {\n                event.preventDefault();\n                const partidoActualizado = {\n                    nombre: document.getElementById('editarNombre').value,\n                    descripcion: document.getElementById('editarDescripcion').value,\n                    deporte: document.getElementById('editarDeporte').value,\n                    resultado: parseInt(document.getElementById('editarResultado').value, 10),\n                    apuesta: parseFloat(document.getElementById('editarApuesta').value)\n                };\n                updatePartido(id, partidoActualizado);\n            };\n\n            const editarPartidoModal = new bootstrap.Modal(document.getElementById('editarPartidoModal'));\n            editarPartidoModal.show();\n        })\n        .catch(error => showMessage('Error al obtener el partido: ' + error.message, true));\n}\n\ndocument.getElementById('partidoForm').addEventListener('submit', function(event) {\n    event.preventDefault();\n\n    const partido = {\n        nombre: document.getElementById('nombre').value,\n        descripcion: document.getElementById('descripcion').value,\n        deporte: document.getElementById('deporte').value,\n        resultado: parseInt(document.getElementById('resultado').value, 10),\n        apuesta: parseFloat(document.getElementById('apuesta').value)\n    };\n\n    createPartido(partido);\n});\n\nfunction createPartido(partido) {\n    fetch('/api/partidos', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(partido)\n    })\n    .then(response => response.json())\n    .then(data => {\n        showMessage('Partido creado correctamente.');\n        getPartidos(); \n        document.getElementById('partidoForm').reset();\n        const crearPartidoModal = bootstrap.Modal.getInstance(document.getElementById('crearPartidoModal'));\n        crearPartidoModal.hide(); \n    })\n    .catch(error => showMessage('Error al crear el partido: ' + error.message, true));\n}\n\nfunction updatePartido(id, partido) {\n    fetch(`/api/partidos/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(partido)\n    })\n    .then(response => response.json())\n    .then(data => {\n        showMessage('Partido actualizado correctamente.');\n        getPartidos(); \n        const editarPartidoModal = bootstrap.Modal.getInstance(document.getElementById('editarPartidoModal'));\n        editarPartidoModal.hide();\n    })\n    .catch(error => showMessage('Error al actualizar el partido: ' + error.message, true));\n}\n\nfunction deletePartido(id) {\n    fetch(`/api/partidos/${id}`, { method: 'DELETE' })\n    .then(response => {\n        if (response.ok) {\n            showMessage('Partido eliminado correctamente.');\n            getPartidos();\n        } else {\n            showMessage('Error al eliminar el partido.', true);\n        }\n    })\n    .catch(error => showMessage('Error al eliminar el partido: ' + error.message, true));\n}\n\nfunction ganarPartido(id) {\n    fetch(`/api/partidos/${id}/gana`, { method: 'POST' })\n        .then(response => {\n            if (!response.ok) {\n                return response.text().then(errorMessage => {\n                    throw new Error(errorMessage);\n                });\n            }\n            return response.text();\n        })\n        .then(message => {\n            showMessage(message);\n            getPartidos(); \n        })\n        .catch(error => showMessage('Error al ganar el partido: ' + error.message, true));\n}\n\nfunction perderPartido(id) {\n    fetch(`/api/partidos/${id}/pierde`, { method: 'POST' })\n        .then(response => {\n            if (!response.ok) {\n                return response.text().then(errorMessage => {\n                    throw new Error(errorMessage);\n                });\n            }\n            return response.text();\n        })\n        .then(message => {\n            showMessage(message);\n            getPartidos(); \n        })\n        .catch(error => showMessage('Error al perder el partido: ' + error.message, true));\n}\n\ndocument.getElementById('uploadForm').addEventListener('submit', function(event) {\n    event.preventDefault(); \n\n    const fileInput = document.getElementById('fileInput');\n    const file = fileInput.files[0];\n\n    if (!file) {\n        showMessage(\"Por favor, selecciona un archivo.\", true);\n        return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    fetch('/api/partidos/upload', {\n        method: 'POST',\n        body: formData\n    })\n    .then(response => {\n        if (!response.ok) {\n            return response.text().then(errorMessage => {\n                throw new Error(errorMessage);\n            });\n        }\n        return response.text();\n    })\n    .then(message => {\n        showMessage(message); \n        document.getElementById('uploadForm').reset();\n        getPartidos();\n    })\n    .catch(error => {\n        showMessage(\"Error al subir el archivo: \" + error.message, true);\n    });\n});\n\nfunction downloadFile(id) {\n    fetch(`/api/partidos/download?id=${id}`)\n        .then(response => {\n            if (!response.ok) {\n                return response.text().then(errorMessage => {\n                    throw new Error(errorMessage);\n                });\n            }\n            return response.blob();\n        })\n        .then(blob => {\n            const link = document.createElement('a');\n            link.href = URL.createObjectURL(blob);\n            link.download = `archivo_partido_${id}.txt`;\n            link.click();\n        })\n        .catch(error => showMessage(\"Error al descargar el archivo: \" + error.message, true));\n}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    getPartidos();\n});"],"names":[],"version":3,"file":"index.9a97c2a9.js.map","sourceRoot":"/__parcel_source_root/"}